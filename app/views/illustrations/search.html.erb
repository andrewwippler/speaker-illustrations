<h1>Search Results</h1>
<div>
<% unless @search_results.empty? or @q.empty? %>
<p>Searched for "<%= @q %>"</p>

  <% unless @tag_results.empty? %>
  <h2>Tags</h2>
  <table class="table table-borderless">
    <tbody>
      <% 0.upto(@rows_per_column-1).each do |row| %>
        <tr>
          <% 0.upto(2).each do |column| %>
          <% index = row + (column * @rows_per_column) %>
          <td><%= link_to @tag_results[index].name, @tag_results[index] unless index >= @tag_results.count %></td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
  <% end %>

  <% unless @title_results.empty? %>
  <h2>Titles</h2>
  <% @title_results.each do |sr| %>
    <p><%= link_to sr.title, sr %> <% unless sr.author.empty? -%>- <%= sr.author -%><% end -%><br />
  <% end %>
  <% end %>

  <h2>Content</h2>
  <% @search_results.each do |sr| %>
    <p><%= link_to sr.title, sr %> <% unless sr.author.empty? -%>- <%= sr.author -%><% end -%><br />
    <%= sr.content.html_safe %></p>
  <% end %>

<% else %>
    <p>Nothing found for "<%= @q %>"</p>
  
<% end %>
</div>
